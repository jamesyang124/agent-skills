# API Documentation Template

This template shows the expected structure for API documentation generated by this skill.

---

## [HTTP METHOD] /api/path/to/endpoint

**Summary**: Brief one-line description of what this endpoint does.

**Description**: More detailed explanation of the endpoint's purpose, use cases, and any important context.

---

## Authentication

**Required**: Yes/No

**Middleware**:
- `JWTMiddleware` - Requires valid JWT token in Authorization header
- `AdminMiddleware` - Requires admin role (if applicable)
- Other middleware as identified

**Permissions**: Describe any specific permission requirements

---

## Request

### HTTP Method
`GET`, `POST`, `PUT`, `PATCH`, `DELETE`, etc.

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | string | Yes | Resource identifier |

### Query Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `page` | integer | No | Page number for pagination (default: 1) |
| `limit` | integer | No | Items per page (default: 10) |

### Headers
| Header | Required | Description |
|--------|----------|-------------|
| `Authorization` | Yes | Bearer token for authentication |
| `Content-Type` | Yes | `application/json` |

### Request Body
**Content-Type**: `application/json`

```json
{
  "field1": "string",
  "field2": 123,
  "nested_object": {
    "property": "value"
  }
}
```

**DTO Structure**: `dto.RequestStructName`

**Field Descriptions**:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `field1` | string | Yes | Description of field1 |
| `field2` | integer | No | Description of field2 |
| `nested_object` | object | No | Description of nested object |

---

## Response

### Success Response (200 OK)
**Content-Type**: `application/json`

```json
{
  "status": "success",
  "data": {
    "id": "123",
    "name": "Example"
  }
}
```

**DTO Structure**: `dto.ResponseStructName`

### Error Responses

#### 400 Bad Request
Invalid request parameters or malformed body

```json
{
  "error": "validation error message"
}
```

#### 401 Unauthorized
Missing or invalid authentication token

```json
{
  "error": "unauthorized"
}
```

#### 403 Forbidden
Insufficient permissions

```json
{
  "error": "forbidden"
}
```

#### 404 Not Found
Resource not found

```json
{
  "error": "resource not found"
}
```

#### 500 Internal Server Error
Server-side error during processing

```json
{
  "error": "internal server error"
}
```

---

## Implementation Details

### Overview
Describe the high-level flow of the handler implementation.

### Key Components

**Services Used**:
- `service.ServiceName` - Description of what this service does in the context of this endpoint

**External Dependencies**:
- BlendVision API - for video processing
- Directus CMS - for content management
- Database queries - specific tables accessed

### Business Logic

1. **Step 1**: Description of first major step
   - Key validation or transformation
   - Important checks

2. **Step 2**: Description of second major step
   - Service calls made
   - Data processing

3. **Step 3**: Description of final step
   - Response construction
   - Side effects (notifications, logs, etc.)

### Application Flow (Mermaid)

Provide a **Mermaid sequence diagram** that shows the key decision flow for this endpoint.
Use the **WeWeave Mermaid Charts & Diagrams** inline macro and include Mermaid text in the body.

<ac:structured-macro ac:name="confluence-mermaid">
  <ac:plain-text-body><![CDATA[
sequenceDiagram
  participant Client
  participant API
  participant Service
  Client->>API: Request
  API->>Service: Validate/Process
  alt Valid
    Service-->>API: Success data
    API-->>Client: 200 OK
  else Invalid
    Service-->>API: Error
    API-->>Client: 4xx/5xx
  end
]]></ac:plain-text-body>
</ac:structured-macro>

### Important Notes

- **Performance**: Any caching, optimization, or performance considerations
- **Rate Limiting**: If applicable
- **Idempotency**: Whether the operation is idempotent
- **Side Effects**: Any side effects like sending emails, webhooks, etc.
- **Known Limitations**: Any current limitations or TODO items

### Validation Rules

Keep this section terse but include the **reason/intent** behind each rule (why/how it is validated).

| Rule | Reason |
| --- | --- |
| Type parameter is optional | API works with or without the parameter (optional filter) |
| Only "video" value accepted | Validator enforces allowed enum to prevent unsupported filters |
| Case-sensitive validation | Bound to a strict validator; only lowercase "video" passes |

---

## Related Endpoints

- `GET /api/related/endpoint` - Brief description
- `POST /api/another/endpoint` - Brief description

---

## Examples

### Example 1: Basic Usage

**Request**:
```bash
curl -X POST https://api.example.com/api/path/to/endpoint \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field1": "value1",
    "field2": 123
  }'
```

**Response**:
```json
{
  "status": "success",
  "data": {
    "id": "generated-id",
    "field1": "value1",
    "field2": 123
  }
}
```

### Example 2: Error Case

**Request**:
```bash
curl -X POST https://api.example.com/api/path/to/endpoint \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field2": 123
  }'
```

**Response** (400 Bad Request):
```json
{
  "error": "field1 is required"
}
```

---

## Change Log

| Date | Version | Changes |
|------|---------|---------|
| 2025-01-28 | 1.0 | Initial documentation |
| 2025-02-02 | 1.1 | Updated error responses (added 424 status) |

**Note**: When updating, increment the version (1.0 → 1.1 → 1.2 for minor changes, 1.x → 2.0 for major changes)
**Note**: Keep at most 3 entries in the change log (most recent only).

---

**Generated by**: Claude Code Agent with api-spec-to-confluence skill
**Last Updated**: [Current Date]
**Source Code**: `handler/filename.go:lineNumber`
